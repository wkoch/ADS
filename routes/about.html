<svelte:head>
	<title>About</title>
</svelte:head>

<h1>Convers√£o de Bases</h1>

<input type="text" bind:value=decimal on:change=converta("dec")>
<input type="text" bind:value=binario>
<input type="text" bind:value=octal>
<input type="text" bind:value=hexa>

<script>
	function multiplesBelow(b, m) {
		let list = [1,b];
		while (list[list.length-1]*b <= m) {
			list.push(list[list.length-1]*b);
		}
		console.log(list);
		return list.reverse();
	}
	function decimalToBinary(dec) {
		let binary = [];
		let multiples = multiplesBelow(2, dec);
		console.log(multiples);
		multiples.forEach(n => {
			if (dec >= n) {
				console.log(`${dec}-${n} = ${dec-n}`);
				binary.push(1);
				dec-=n;
			} else {
				binary.push(0);
			}
		});
		console.log(binary);
		return binary.join('');
		
	}
	export default {
	  data() {
	    return {
	      decimal: 0,
		  binario: 0,
		  octal: 0,
		  hexa: 0
	    };
	  },
	  methods: {
			converta(tipo) {
				let { decimal, binario, octal, hexa } = this.get();
				switch (tipo) {
					case "dec":
						this.set({ binario: decimalToBinary(decimal) });
						this.set({ octal: decimal*8 });
						this.set({ hexa: decimal*16 });
						break;
				
					default:
						break;
				}
			}
		}
	};
</script>